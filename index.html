<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>T.B Agar.io</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: #222;
        overflow: hidden;
        color: #fff;
    }
    #startScreen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #222;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    #startScreen h1 {
        font-size: 3em;
        margin-bottom: 20px;
    }
    #startScreen input {
        padding: 10px;
        font-size: 1.2em;
        margin-bottom: 10px;
    }
    #startScreen button {
        padding: 10px 20px;
        font-size: 1.2em;
        cursor: pointer;
        background-color: #0f0;
        border: none;
        border-radius: 5px;
    }
    canvas {
        display: block;
    }
</style>
</head>
<body>

<div id="startScreen">
    <h1>T.B Agar.io</h1>
    <input type="text" id="playerName" placeholder="Voer je naam in">
    <button onclick="startGame()">Start Game</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let gameRunning = false;
let player = { x: canvas.width/2, y: canvas.height/2, radius: 20, color: getRandomColor(), name: '' };
let foods = [];
let foodCount = 50;
let keys = {};

function getRandomColor() {
    const colors = ['#FF4136','#FF851B','#2ECC40','#0074D9','#B10DC9','#FFDC00'];
    return colors[Math.floor(Math.random() * colors.length)];
}

function createFood() {
    for(let i=0;i<foodCount;i++){
        foods.push({
            x: Math.random()*canvas.width,
            y: Math.random()*canvas.height,
            radius: 5,
            color: getRandomColor()
        });
    }
}

function drawPlayer() {
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.radius, 0, Math.PI*2);
    ctx.fillStyle = player.color;
    ctx.fill();
    ctx.closePath();
    
    ctx.fillStyle = "#fff";
    ctx.font = `${Math.max(player.radius/2, 12)}px Arial`;
    ctx.textAlign = "center";
    ctx.fillText(player.name, player.x, player.y + 4);
}

function drawFood() {
    for(let f of foods){
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.radius, 0, Math.PI*2);
        ctx.fillStyle = f.color;
        ctx.fill();
        ctx.closePath();
    }
}

function movePlayer() {
    const speed = 5;
    if(keys['ArrowUp'] || keys['w']) player.y -= speed;
    if(keys['ArrowDown'] || keys['s']) player.y += speed;
    if(keys['ArrowLeft'] || keys['a']) player.x -= speed;
    if(keys['ArrowRight'] || keys['d']) player.x += speed;

    // keep player in canvas
    player.x = Math.max(player.radius, Math.min(canvas.width - player.radius, player.x));
    player.y = Math.max(player.radius, Math.min(canvas.height - player.radius, player.y));
}

function checkCollision() {
    for(let i=foods.length-1;i>=0;i--){
        let f = foods[i];
        let dx = f.x - player.x;
        let dy = f.y - player.y;
        let distance = Math.sqrt(dx*dx + dy*dy);
        if(distance < player.radius + f.radius){
            foods.splice(i,1);
            player.radius += 0.5;
        }
    }
}

function gameLoop() {
    if(!gameRunning) return;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    movePlayer();
    checkCollision();
    drawFood();
    drawPlayer();
    requestAnimationFrame(gameLoop);
}

function startGame() {
    const nameInput = document.getElementById('playerName').value;
    if(!nameInput) {
        alert('Voer een naam in!');
        return;
    }
    player.name = nameInput;
    document.getElementById('startScreen').style.display = 'none';
    gameRunning = true;
    createFood();
    gameLoop();
}

window.addEventListener('keydown', (e) => keys[e.key] = true);
window.addEventListener('keyup', (e) => keys[e.key] = false);
window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>

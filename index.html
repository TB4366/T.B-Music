<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Agar.io Bot Controller</title>
<style>
body {
    background: #0e0e0e;
    color: #eee;
    font-family: Arial, sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
}
h2 {
    margin-bottom: 10px;
}
label {
    display: block;
    margin-top: 10px;
}
input, select, button {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    font-size: 14px;
}
.buttons {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}
button {
    cursor: pointer;
}
button.disabled {
    opacity: 0.4;
    pointer-events: none;
}
#log {
    margin-top: 20px;
    background: #1a1a1a;
    border: 1px solid #333;
    padding: 10px;
    height: 220px;
    overflow-y: auto;
    font-size: 13px;
}
#agarFace {
    display: block;
    margin: 20px auto;
    background: #111;
    border-radius: 50%;
}
</style>
</head>
<body>

<h2>Agar.io Bot Setup</h2>

<!-- UID -->
<label>UID (bots volgen deze speler)</label>
<input id="uid" placeholder="Voer UID in">

<!-- Party code -->
<label>Party Code</label>
<input id="partyCode" placeholder="Bijv. ABC123">

<!-- Game mode -->
<label>Game Mode</label>
<select id="gameMode">
    <option value="">-- selecteer --</option>
    <option value="classic">Classic</option>
    <option value="burst">Burst</option>
</select>

<!-- Buttons -->
<div class="buttons">
    <button id="startBtn" class="disabled" onclick="startBots()" disabled>Start</button>
    <button onclick="stopBots()">Stop</button>
</div>

<!-- Agar.io gezicht -->
<canvas id="agarFace" width="120" height="120"></canvas>

<!-- Logs -->
<div id="log"></div>

<script>
/* =========================
   CORE STATE
========================= */
let botsRunning = false;
let botsStartSuccess = false;
let botTick = 0;
let botTimer = null;

/* =========================
   VALIDATION
========================= */
function canStartBots() {
    const uid = document.getElementById("uid").value.trim();
    const party = document.getElementById("partyCode").value.trim();
    const mode = document.getElementById("gameMode").value;
    return uid !== "" && party !== "" && mode !== "" && !botsRunning;
}

/* =========================
   UI ENABLE/DISABLE
========================= */
["uid", "partyCode", "gameMode"].forEach(id => {
    document.getElementById(id).addEventListener("input", updateStartButton);
    document.getElementById(id).addEventListener("change", updateStartButton);
});

function updateStartButton() {
    const btn = document.getElementById("startBtn");
    btn.disabled = !canStartBots();
    btn.classList.toggle("disabled", !canStartBots());
}

/* =========================
   START / STOP BOTS
========================= */
function startBots() {
    if (!canStartBots()) {
        log("Kan bots niet starten: gegevens ontbreken");
        return;
    }

    botsRunning = true;
    botsStartSuccess = true;

    const uid = document.getElementById("uid").value.trim();
    const party = document.getElementById("partyCode").value.trim();
    const mode = document.getElementById("gameMode").value;

    // Lock inputs
    ["uid", "partyCode", "gameMode"].forEach(id => {
        document.getElementById(id).disabled = true;
    });
    document.getElementById("startBtn").disabled = true;

    log("Start Bots");
    log("UID volgen: " + uid);
    log("Party code: " + party);
    log("Game mode: " + mode);

    botTick = 0;
    botLoop(uid, mode);
}

function stopBots() {
    if (!botsRunning) return;

    botsRunning = false;
    botsStartSuccess = false;
    clearTimeout(botTimer);

    // Unlock inputs
    ["uid", "partyCode", "gameMode"].forEach(id => {
        document.getElementById(id).disabled = false;
    });
    updateStartButton();

    log("Bots stopped");
}

/* =========================
   BOT LOOP
========================= */
function botLoop(uid, mode) {
    if (!botsRunning) return;

    botTick++;
    if (botTick % 5 === 0) { // log elke 5 seconden
        log(`Botting â†’ volgen UID ${uid} (${mode})`);
    }

    botTimer = setTimeout(() => botLoop(uid, mode), 1000);
}

/* =========================
   LOG SYSTEM
========================= */
function log(message) {
    const logDiv = document.getElementById("log");
    logDiv.innerHTML += `[${new Date().toLocaleTimeString()}] ${message}<br>`;
    logDiv.scrollTop = logDiv.scrollHeight;
}

/* =========================
   AGAR.IO GEZICHT
========================= */
const canvas = document.getElementById("agarFace");
const ctx = canvas.getContext("2d");

function drawAgarFace() {
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 50;

    // Body
    ctx.fillStyle = "#4CAF50";
    ctx.beginPath();
    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
    ctx.fill();

    // Eyes
    ctx.fillStyle = "#fff";
    ctx.beginPath();
    ctx.arc(centerX - 20, centerY - 10, 10, 0, Math.PI * 2);
    ctx.arc(centerX + 20, centerY - 10, 10, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(centerX - 20, centerY - 10, 5, 0, Math.PI * 2);
    ctx.arc(centerX + 20, centerY - 10, 5, 0, Math.PI * 2);
    ctx.fill();

    // Mouth
    ctx.strokeStyle = "#000";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.arc(centerX, centerY + 10, 20, 0, Math.PI, false);
    ctx.stroke();
}

drawAgarFace();
</script>

</body>
</html>

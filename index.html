<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Agar.io — Veilige aankoopassistent</title>
<style>
  body { font-family: Arial, sans-serif; background:#f7f7f8; margin:20px; color:#222 }
  header { text-align:center; margin-bottom:18px }
  h1 { margin:6px 0 }
  .uidbox { display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-bottom:12px }
  input[type="text"]{ padding:8px 10px; font-size:16px; border:1px solid #ccc; border-radius:6px; width:280px }
  button { padding:9px 12px; border-radius:8px; border:none; cursor:pointer; font-weight:700 }
  .primary { background:#0b79d0; color:#fff }
  .secondary { background:#6c757d; color:#fff }
  .skins { display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:12px }
  .skin { width:150px; background:#fff; border-radius:10px; padding:10px; text-align:center; box-shadow:0 2px 6px rgba(0,0,0,0.06) }
  .skin img{ width:100px; height:100px; object-fit:contain }
  .coins { color:#ff6600; font-weight:700; margin:8px 0 }
  .buy { background:#1fa14a; color:#fff; padding:7px 10px; border-radius:6px; cursor:pointer }
  .note{ text-align:center; color:#444; margin-top:14px }
  footer{ text-align:center; color:#777; margin-top:20px; font-size:13px }
</style>
</head>
<body>

<header>
  <h1>Agar.io — Veilige aankoopassistent</h1>
  <p class="note">Voer je UID in en klik op "Koop". De pagina zal je naar de officiële winkel sturen en alle aankoopgegevens naar je klembord kopiëren — jij bevestigd de betaling zelf in de winkel.</p>
  <div class="uidbox" aria-label="UID invoer">
    <input id="uidInput" type="text" placeholder="Voer je Agar.io UID in (bijv. 123456789)" />
    <button id="saveUid" class="primary">UID Opslaan</button>
    <button id="clearUid" class="secondary">Wis UID</button>
  </div>
  <div id="uidStatus" style="text-align:center; color:#555">UID niet opgeslagen</div>
</header>

<main>
  <section>
    <h2 style="text-align:center">Planeten &amp; Ruimte</h2>
    <div class="skins" id="skins">
      <!-- Voorbeeld skin -->
      <div class="skin" data-name="Venus" data-coins="250" data-skinid="venus">
        <img src="images/venus.png" alt="Venus">
        <div>Venus</div>
        <div class="coins">250 Coins</div>
        <button class="buy">Koop</button>
      </div>

      <div class="skin" data-name="Jupiter" data-coins="900" data-skinid="jupiter">
        <img src="images/jupiter.png" alt="Jupiter">
        <div>Jupiter</div>
        <div class="coins">900 Coins</div>
        <button class="buy">Koop</button>
      </div>

      <!-- voeg hier je overige skins toe met dezelfde data-* attributen -->
    </div>
  </section>

  <div class="note">
    <strong>Belangrijk:</strong> deze tool automatiseert enkel voorbereidend werk. De betaling zelf gebeurt altijd in de officiële Agar.io-winkel.
  </div>
</main>

<footer>
  © Aankoopassistent — Je blijft zelf verantwoordelijk voor de uiteindelijke bevestiging op Agar.io.
</footer>

<script>
(function(){
  const uidInput = document.getElementById('uidInput');
  const saveBtn = document.getElementById('saveUid');
  const clearBtn = document.getElementById('clearUid');
  const uidStatus = document.getElementById('uidStatus');
  const skins = document.getElementById('skins');

  function loadUid() {
    const s = localStorage.getItem('agario_uid');
    if (s) { uidInput.value = s; uidStatus.textContent = 'Opgeslagen UID: ' + s; }
    else uidStatus.textContent = 'UID niet opgeslagen';
  }
  function validUid(u){ return typeof u==='string' && u.trim().length>=3; }

  saveBtn.addEventListener('click', () => {
    const u = uidInput.value.trim();
    if (!validUid(u)){ alert('Voer een geldige UID in (minimaal 3 tekens).'); return; }
    localStorage.setItem('agario_uid', u);
    uidStatus.textContent = 'Opgeslagen UID: ' + u;
    alert('UID opgeslagen.');
  });
  clearBtn.addEventListener('click', () => {
    localStorage.removeItem('agario_uid');
    uidInput.value=''; uidStatus.textContent='UID niet opgeslagen';
  });

  skins.addEventListener('click', async (e) => {
    const btn = e.target.closest('button.buy');
    if (!btn) return;
    const skinEl = btn.closest('.skin');
    const skinName = skinEl.dataset.name || 'Onbekend';
    const coins = skinEl.dataset.coins || 'Onbekend';
    const skinId = skinEl.dataset.skinid || '';
    const uid = localStorage.getItem('agario_uid') || uidInput.value.trim();

    if (!validUid(uid)) { alert('Sla eerst je UID op (klik op "UID Opslaan") voordat je koopt.'); return; }

    // Bouw een tekst om te kopiëren en een veilige querystring voor de winkel-tab
    const purchaseText = `Agar.io UID: ${uid}\nSkin: ${skinName}\nPrijs: ${coins} Coins\n\nOpen de officiële Agar.io-winkel en voltooi de aankoop.`;
    try {
      await navigator.clipboard.writeText(purchaseText);
    } catch (err) {
      // fallback copy
      const ta = document.createElement('textarea'); ta.value = purchaseText;
      document.body.appendChild(ta); ta.select();
      try { document.execCommand('copy'); } catch (e) { /* noop */ }
      document.body.removeChild(ta);
    }

    // Bouw winkel-URL met veilige query-params die alleen ter informatie dienen (we sturen geen automatische betaling).
    // We gebruiken de root shop; als Agar.io individuele skin-links heeft kan die hier komen (niet automatisch submitten).
    const shopUrl = new URL('https://agar.io/store');
    // Zet leesbare info in de query zodat de gebruiker in de nieuwe tab ziet welke skin en UID bedoeld is.
    shopUrl.searchParams.set('assist_uid', uid);
    shopUrl.searchParams.set('assist_skin', skinId || skinName);
    shopUrl.searchParams.set('assist_price', coins);

    const openConfirm = confirm(`De aankoopgegevens zijn naar je klembord gekopieerd:\n\nSkin: ${skinName}\nPrijs: ${coins}\n\nWil je nu de officiële winkel openen om de aankoop af te ronden? (Je moet zelf bevestigen in de winkel.)`);
    if (openConfirm) {
      // Open in nieuwe tab. De winkel ontvangt alleen informatieve queryparams — er wordt geen betaling gestart.
      window.open(shopUrl.toString(), '_blank', 'noopener');
      // Optioneel: open een instructie-popup op dezelfde pagina om gebruiker te helpen.
      showLocalInstructions(uid, skinName, coins);
    }
  });

  function showLocalInstructions(uid, skinName, coins) {
    // Simpele instructie overlay — gebruiker blijft zelf verantwoordelijk om te bevestigen.
    const overlay = document.createElement('div');
    overlay.style.position='fixed'; overlay.style.left=0; overlay.style.top=0; overlay.style.right=0; overlay.style.bottom=0;
    overlay.style.background='rgba(0,0,0,0.45)'; overlay.style.display='flex'; overlay.style.alignItems='center';
    overlay.style.justifyContent='center'; overlay.style.zIndex=9999;
    const card = document.createElement('div');
    card.style.background='#fff'; card.style.padding='18px'; card.style.borderRadius='10px'; card.style.maxWidth='420px';
    card.innerHTML = `<h3 style="margin-top:0">Actie vereist: bevestig aankoop</h3>
      <p>Je UID en skingegevens zijn naar je klembord gekopieerd.</p>
      <ul>
        <li><strong>UID:</strong> ${uid}</li>
        <li><strong>Skin:</strong> ${skinName}</li>
        <li><strong>Prijs:</strong> ${coins}</li>
      </ul>
      <p>Klik in de geopende Agar.io-winkel op de juiste skin en plak (Ctrl+V / Cmd+V) indien nodig je UID of de kopieerde info in het opmerkingenveld — voltooi daarna zelf de betaling.</p>
      <div style="text-align:right; margin-top:10px;">
        <button id="closeAssist" style="padding:8px 12px; border-radius:8px; border:none; background:#0b79d0; color:#fff;">Sluiten</button>
      </div>`;
    overlay.appendChild(card);
    document.body.appendChild(overlay);
    document.getElementById('closeAssist').addEventListener('click', ()=> overlay.remove());
  }

  // initial
  loadUid();
})();
</script>

</body>
</html>

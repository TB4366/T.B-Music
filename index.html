<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Online Remix App met YouTube Zoeken</title>
<style>
body { font-family: Arial, sans-serif; background: #111; color: #fff; text-align: center; padding: 20px; }
input, button { padding: 10px; margin: 5px; font-size: 16px; }
#results { margin-top: 20px; }
.video-result { padding: 10px; background: #222; border-radius: 8px; margin: 10px auto; width: 80%; cursor: pointer; }
button.effect { background: #333; border: none; color: white; padding: 10px; margin: 5px; border-radius: 6px; cursor: pointer; }
button.effect:hover { background: #555; }
</style>
</head>
<body>

<h1>üéß YouTube Remix App</h1>

<input type="text" id="searchQuery" placeholder="Zoek artiest of nummer...">
<button id="searchBtn">üîç Zoeken</button>

<div id="results"></div>

<div id="player"></div>

<h2>üéõ Remix Controls</h2>
<button class="effect" id="echoBtn">Echo</button>
<button class="effect" id="lowPassBtn">Low-pass</button>
<button class="effect" id="highPassBtn">High-pass</button>
<button class="effect" id="speedUpBtn">Speed +</button>
<button class="effect" id="slowDownBtn">Speed -</button>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let player;
let audioContext;
let sourceNode;
let gainNode;
let echoNode;
let lowPassFilter;
let highPassFilter;

let echoActive=false, lowPassActive=false, highPassActive=false;
let playbackRate = 1;

// --- YouTube API setup ---
function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '0',
    width: '0',
    playerVars: { 'playsinline': 1 },
    events: {
      'onReady': initAudio
    }
  });
}

// --- Audio setup ---
function initAudio() {
  audioContext = new (window.AudioContext || window.webkitAudioContext)();
  const audio = player.getIframe();
  const streamDestination = audioContext.createMediaElementSource(audio);
  gainNode = audioContext.createGain();
  echoNode = audioContext.createDelay(0.25);
  lowPassFilter = audioContext.createBiquadFilter(); lowPassFilter.type = 'lowpass';
  highPassFilter = audioContext.createBiquadFilter(); highPassFilter.type = 'highpass';
  sourceNode = streamDestination;
  connectNodes();
}

function connectNodes() {
  if (!sourceNode) return;
  sourceNode.disconnect();
  let node = sourceNode;
  if (echoActive) { node.connect(echoNode); node = echoNode; }
  if (lowPassActive) { node.connect(lowPassFilter); node = lowPassFilter; }
  if (highPassActive) { node.connect(highPassFilter); node = highPassFilter; }
  node.connect(gainNode);
  gainNode.connect(audioContext.destination);
}

// --- Search Functionality (requires your own API key) ---
async function searchYouTube(query) {
  const apiKey = "YOUR_YOUTUBE_API_KEY"; // <-- vervang met jouw eigen key
  const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&q=${encodeURIComponent(query)}&maxResults=5&key=${apiKey}`;
  const res = await fetch(url);
  const data = await res.json();
  displayResults(data.items);
}

function displayResults(videos) {
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';
  videos.forEach(v => {
    const div = document.createElement('div');
    div.className = 'video-result';
    div.innerHTML = `<strong>${v.snippet.title}</strong><br><img src="${v.snippet.thumbnails.default.url}">`;
    div.onclick = () => loadVideo(v.id.videoId);
    resultsDiv.appendChild(div);
  });
}

function loadVideo(videoId) {
  player.loadVideoById(videoId);
  player.playVideo();
}

// --- Effect Buttons ---
document.getElementById('echoBtn').onclick = () => { echoActive = !echoActive; connectNodes(); alert("Echo: " + (echoActive ? "Aan" : "Uit")); };
document.getElementById('lowPassBtn').onclick = () => { lowPassActive = !lowPassActive; connectNodes(); alert("Low-pass: " + (lowPassActive ? "Aan" : "Uit")); };
document.getElementById('highPassBtn').onclick = () => { highPassActive = !highPassActive; connectNodes(); alert("High-pass: " + (highPassActive ? "Aan" : "Uit")); };

document.getElementById('speedUpBtn').onclick = () => {
  playbackRate += 0.1;
  player.setPlaybackRate(playbackRate);
  alert("Speed: " + playbackRate.toFixed(1));
};

document.getElementById('slowDownBtn').onclick = () => {
  playbackRate = Math.max(0.25, playbackRate - 0.1);
  player.setPlaybackRate(playbackRate);
  alert("Speed: " + playbackRate.toFixed(1));
};

// --- Search button click ---
document.getElementById('searchBtn').onclick = () => {
  const query = document.getElementById('searchQuery').value.trim();
  if (query) searchYouTube(query);
};
</script>
</body>
</html>

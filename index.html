<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geavanceerd Werkrooster</title>
<style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    h1 { text-align: center; }

    .controls { text-align: center; margin-bottom: 15px; }
    .controls button { margin: 0 5px; padding: 8px 15px; }

    table { width: 100%; border-collapse: collapse; background: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    th, td { padding: 10px; border: 1px solid #ddd; text-align: center; }
    th { background: #007bff; color: white; }

    td.shift { cursor: pointer; transition: 0.3s; border-radius: 4px; }
    td.shift:hover { opacity: 0.8; }

    td.employee { text-align: left; font-weight: bold; background: #f2f2f2; }

    /* Shift kleuren per type */
    .shift.work { background: #cce5ff; }
    .shift.off { background: #d4edda; }
    .shift.vacation { background: #f8d7da; }

    .popup, .overlay {
        display: none;
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    }
    .overlay { background: rgba(0,0,0,0.5); z-index: 500; }
    .popup { background: #fff; padding: 20px; border-radius: 8px; width: 300px; top:50%; left:50%; transform: translate(-50%, -50%); z-index: 1000; box-shadow:0 5px 15px rgba(0,0,0,0.3);}
    .popup input, .popup select { margin-bottom: 10px; width: 100%; padding:5px; }
</style>
</head>
<body>

<h1>Geavanceerd Werkrooster</h1>

<div class="controls">
    <button onclick="prevWeek()">&#8592; Vorige Week</button>
    <span id="weekLabel"></span>
    <button onclick="nextWeek()">Volgende Week &#8594;</button>
    <button onclick="addEmployee()">Medewerker Toevoegen</button>
</div>

<table id="schedule">
    <thead>
        <tr>
            <th>Medewerker</th>
            <th>Maandag</th>
            <th>Dinsdag</th>
            <th>Woensdag</th>
            <th>Donderdag</th>
            <th>Vrijdag</th>
            <th>Zaterdag</th>
            <th>Zondag</th>
        </tr>
    </thead>
    <tbody>
        <!-- Dynamisch ingevuld -->
    </tbody>
</table>

<div class="overlay" id="overlay"></div>
<div class="popup" id="popup">
    <h3>Shift Instellingen</h3>
    <label>Type shift:</label>
    <select id="shiftType">
        <option value="work">Werk</option>
        <option value="off">Vrij</option>
        <option value="vacation">Verlof</option>
    </select>
    <label>Tijd (bijv. 09:00-17:00):</label>
    <input type="text" id="shiftTime" placeholder="09:00-17:00">
    <button onclick="saveShift()">Opslaan</button>
    <button onclick="closePopup()">Annuleren</button>
</div>

<script>
let employees = ["Jan", "Lisa"];
let selectedCell = null;
let currentWeek = 0; // offset van huidige week

function renderWeek() {
    const tbody = document.querySelector("#schedule tbody");
    tbody.innerHTML = "";

    document.getElementById("weekLabel").innerText = "Week " + (currentWeek + 1);

    employees.forEach(emp => {
        const row = document.createElement("tr");
        const nameCell = document.createElement("td");
        nameCell.innerText = emp;
        nameCell.classList.add("employee");
        row.appendChild(nameCell);

        for(let i=0; i<7; i++){
            const cell = document.createElement("td");
            cell.classList.add("shift","work");
            cell.innerText = "09:00-17:00";
            cell.addEventListener("click", ()=> openPopup(cell));
            row.appendChild(cell);
        }
        tbody.appendChild(row);
    });
}

// Popup functies
function openPopup(cell){
    selectedCell = cell;
    document.getElementById("overlay").style.display = "block";
    document.getElementById("popup").style.display = "block";
    // Zet huidige waarden
    document.getElementById("shiftTime").value = cell.innerText;
    if(cell.classList.contains("work")) document.getElementById("shiftType").value = "work";
    else if(cell.classList.contains("off")) document.getElementById("shiftType").value = "off";
    else if(cell.classList.contains("vacation")) document.getElementById("shiftType").value = "vacation";
}

function saveShift(){
    if(!selectedCell) return;
    const type = document.getElementById("shiftType").value;
    const time = document.getElementById("shiftTime").value || (type==="off" ? "Vrij" : "");
    selectedCell.innerText = time;

    selectedCell.classList.remove("work","off","vacation");
    selectedCell.classList.add(type);

    closePopup();
}

function closePopup(){
    document.getElementById("overlay").style.display = "none";
    document.getElementById("popup").style.display = "none";
}

// Week navigatie
function nextWeek(){ currentWeek++; renderWeek(); }
function prevWeek(){ currentWeek--; renderWeek(); }

// Medewerker toevoegen
function addEmployee(){
    const name = prompt("Naam nieuwe medewerker:");
    if(name){ employees.push(name); renderWeek(); }
}

// InitiÃ«le render
renderWeek();
</script>

</body>
</html>
